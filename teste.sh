#!/bin/bash   
#Lests build the tests first! (tests are contained here so that the entirety if the test is contained in this file)

echo "a 0.1 [1 2 3]

a+ 1
a+   1*2
a+1*2		+3+4+5*2
a+1
2
(2)(3)
()
a+(2
sin(a))



	
a+(1+2)  
a+(1	+2 *3)
a*(1)
a*(1+2*3)+2*(a*4+5)
sin(a)
ln(a+1)
ln(a^2)
(Sen(a)+(((cos(a*1)))))*aTg(ln(a^2)+atan((1*ln(1/(sen(a)^2)))) )
a*pi
a*e
pi+e" > teste.txt

echo "x  0.0005 [0.117	
1.904	
1.909	
1.963	
1.909	
1.914	
1.909	
1.968	
1.904	
1.904	
2.002	
1.914	
1.909	
1.968	
1.909	
1.914	
1.914	
1.973	
1.914	
1.914	
2.012	
1.914	
1.914	
1.973	
1.914	
1.914	
1.914	
1.973	
1.914	
1.914	
2.012	
1.914	
1.909	
1.968	
1.914	
1.914	
1.914	
1.973	
1.914	
1.914	
2.012	
1.914	
1.914	
1.963	
1.914	
1.914	
1.914	
1.973	
1.914	
1.914	
2.012	
1.914	
1.914	
1.963	
1.909	
1.914	
1.914	
1.973	
1.914	
1.914	
2.012	
1.914	
1.919	
1.968	
1.914	
1.914	
1.914	
1.973	
1.914	
1.914	
2.012	
1.914	
1.919	
1.963	
1.914	
1.914	
1.914	
1.973	
1.914	
1.914	
2.012	
1.914	
1.914	
1.963	
1.914	
1.914	
1.919	
1.968	
1.914	
1.914	
2.012	
1.914	
1.919	
1.963	
1.914	
1.914	
1.914	
1.973	
1.914	
1.914	
2.012	
1.914	
1.919	
1.963	
1.914	
1.914	
1.919	
1.982	
1.914	
1.914	
2.017	
1.914	
1.919	
1.982	
1.919	
1.924	
1.924	
2.002	
1.924	
1.924	
2.036	
1.924	
1.934	
1.992	
1.929	
1.929	
1.934	
2.012	
1.934	
1.939	
2.051	
1.934	
1.939	
2.002	
1.939	
1.943	
1.943	
2.031	
1.948	
1.943	
2.056	
1.943	
1.953	
2.012	
1.953	
1.953	
1.953	
2.031	
1.953	
1.953	
2.065	
1.953	
1.958	
2.022	
1.953	
1.953	
1.958	
2.031	
1.953	
1.953	
2.070	
1.963	
1.958	
2.022	
1.958	
1.963	
1.958	
2.041	
1.958	
1.963	
2.075	
1.963	
1.968	
2.031	
1.963	
1.963	
1.973	
2.046	
1.968	
2.012]

y 0.0005 [4.883E-4
	0.002
	0.003
	0.004
	0.002
	0.002
	0.003
	0.005
	0.003
	0.002
	0.008
	0.002
	0.003
	0.004
	0.002
	0.002
	0.003
	0.004
	0.003
	0.003
	0.007
	0.003
	0.003
	0.004
	0.003
	0.002
	0.003
	0.004
	0.002
	0.002
	0.007
	0.002
	0.003
	0.004
	0.003
	0.002
	0.002
	0.003
	0.002
	0.002
	0.008
	0.002
	0.003
	0.005
	0.003
	0.003
	0.003
	0.004
	0.002
	0.002
	0.007
	0.002
	0.003
	0.004
	0.003
	0.002
	0.002
	0.005
	0.002
	0.002
	0.007
	0.002
	0.002
	0.004
	0.002
	0.002
	0.003
	0.004
	0.003
	0.002
	0.008
	0.002
	0.003
	0.004
	0.003
	0.003
	0.003
	0.005
	0.002
	0.002
	0.008
	0.002
	0.002
	0.004
	0.002
	0.002
	0.003
	0.005
	0.003
	0.003
	0.008
	0.002
	0.003
	0.003
	0.002
	0.003
	0.003
	0.005
	0.003
	0.002
	0.007
	0.003
	0.003
	0.004
	0.003
	0.003
	0.003
	0.006
	0.003
	0.002
	0.008
	0.003
	0.003
	0.006
	0.003
	0.002
	0.002
	0.006
	0.003
	0.002
	0.009
	0.003
	0.003
	0.006
	0.003
	0.003
	0.003
	0.006
	0.003
	0.003
	0.009
	0.003
	0.003
	0.006
	0.003
	0.003
	0.003
	0.008
	0.003
	0.003
	0.010
	0.003
	0.004
	0.008
	0.004
	0.003
	0.004
	0.009
	0.004
	0.004
	0.011
	0.004
	0.003
	0.008
	0.004
	0.004
	0.004
	0.010
	0.004
	0.004
	0.011
	0.003
	0.004
	0.008
	0.004
	0.004
	0.004
	0.010
	0.004
	0.004
	0.012
	0.004
	0.004
	0.008
	0.004
	0.004
	0.005
	0.010
	0.005
	0.019]

-linear/angular

(-a_1+(a_1^2-4*a_2*a_0)^5  )/(2*a_2)
(-a_1-(a_1^2-4*a_2*a_0)^5  )/(2*a_2)" > teste_simple_fit.txt

#now let's build the reference

g++ PI.cpp -o PI_reference -O3
printf "teste.txt\nexit" | ./PI_reference > disposable.txt && mv teste_final.txt teste_reference.txt 

printf "teste_simple_fit.txt +simple_linear_fit\nexit" | ./PI_reference > disposable.txt && mv teste_simple_fit_final.txt teste_simple_linear_fit_reference.txt 

printf "teste_simple_fit.txt +simple_quadratic_fit\nexit" | ./PI_reference > disposable.txt && mv teste_simple_fit_final.txt teste_simple_quadratic_fit_reference.txt 

#Now lets run the tests

printf "teste symbolized by < and reference symbolized by >\n\n"

printf "teste.txt\nexit" | ./$1 > disposable.txt && diff teste_final.txt teste_reference.txt && rm teste_final.txt && rm teste_reference.txt
printf "teste_simple_fit.txt +simple_linear_fit\nexit" | ./$1 > disposable.txt && diff teste_simple_fit_final.txt teste_simple_linear_fit_reference.txt && rm teste_simple_fit_final.txt && rm teste_simple_linear_fit_reference.txt
printf "teste_simple_fit.txt +simple_quadratic_fit\nexit" | ./$1 > disposable.txt && diff teste_simple_fit_final.txt teste_simple_quadratic_fit_reference.txt && rm teste_simple_fit_final.txt && rm teste_simple_quadratic_fit_reference.txt

rm disposable.txt
